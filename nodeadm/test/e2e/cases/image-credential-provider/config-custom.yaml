---
apiVersion: node.eks.aws/v1alpha1
kind: NodeConfig
spec:
  cluster:
    name: my-cluster
    apiServerEndpoint: https://example.com
    certificateAuthority: Y2VydGlmaWNhdGVBdXRob3JpdHk=
    cidr: 10.100.0.0/16
    imageCredentialProviderConfig: |
      {
        "apiVersion": "{{.ConfigApiVersion}}",
        "kind": "CredentialProviderConfig",
        "providers": [
          {
            "name": "{{.EcrProviderName}}",
            "matchImages": [
              "*.dkr.ecr.*.amazonaws.com",
              "*.dkr-ecr.*.on.aws",
              "*.dkr.ecr.*.amazonaws.com.cn",
              "*.dkr-ecr.*.on.amazonwebservices.com.cn",
              "*.dkr.ecr-fips.*.amazonaws.com",
              "*.dkr-ecr-fips.*.on.aws",
              "*.dkr.ecr.*.c2s.ic.gov",
              "*.dkr.ecr.*.sc2s.sgov.gov",
              "*.dkr.ecr.*.cloud.adc-e.uk",
              "*.dkr.ecr.*.csp.hci.ic.gov"
            ],
            "defaultCacheDuration": "12h",
            "apiVersion": "{{.ProviderApiVersion}}"
          },
          {
            "name": "custom-provider",
            "matchImages": ["custom-registry.example.com"],
            "defaultCacheDuration": "12h",
            "apiVersion": "{{.ProviderApiVersion}}"
          }
        ]
      }
